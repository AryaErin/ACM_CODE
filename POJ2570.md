位运算+floyd
```cpp
#include<cstdio>
#include<cstring>
#include<iostream>
#include<set>
#include<map>
#include<vector>
#include<queue>
#include<string>
#include<algorithm>
#include<stack>
using namespace std;
const int MAXN = 222;
int n,access[MAXN][MAXN];
int main(){
    while(scanf("%d",&n)!=EOF && n){
        memset(access,0,sizeof(access));
        int u, v;
        char s[100];
        while(scanf("%d %d",&u,&v)!=EOF && u+v){
            scanf("%s",s);
            int len = strlen(s);
            for(int i = 0; i < len; i++) access[u][v] |= (1<<(s[i]-'a'));
        }
        for(int k = 1; k <= n; k++) for(int i = 1; i <= n; i++) for(int j = 1; j <= n; j++) access[i][j] |= (access[i][k]&access[k][j]);
        while(scanf("%d %d",&u,&v)!=EOF && u+v){
            if(!access[u][v]) puts("-");
            else{
                for(int i = 0; i < 26; i++) if((1<<i)&access[u][v]) putchar(i+'a');
                puts("");
            }
        }
        puts("");
    }
    return 0;
}
```
