最小树形图模板
```cpp
#include<cstdio>
#include<cstring>
#include<iostream>
#include<cmath>
#include<set>
#include<map>
#include<vector>
#include<queue>
#include<string>
#include<algorithm>
#include<stack>
using namespace std;
void ____(){ ios_base::sync_with_stdio(false); cin.tie(0); cout.tie(0); }
const int MAXN = 111;
const int MAXM = 1e4+7;
int n,m,id[MAXN],vis[MAXN],pre[MAXN];
double mc[MAXN];
pair<double,double> coor[MAXN];
struct EDGE{
    int u, v;
    double d;
}e[MAXM];
double cal(const pair<double,double> &A, const pair<double,double> &B){
    return sqrt((A.first-B.first)*(A.first-B.first)+(A.second-B.second)*(A.second-B.second));
}
double zhuliu(){
    int root = 1;
    double res = 0;
    while(true){
        for(int i = 1; i <= n; i++){
            mc[i] = 1e9;
            pre[i] = id[i] = vis[i] = 0;
        }
        for(int i = 1; i <= m; i++) if(e[i].u!=e[i].v&&e[i].d<mc[e[i].v]) mc[e[i].v] = e[i].d, pre[e[i].v] = e[i].u;
        for(int i = 1; i <= n; i++) if(i!=root&&!pre[i]) return -1;
        mc[root] = 0;
        int cnt = 0;
        for(int i = 1; i <= n; i++){
            res += mc[i];
            int cur = i;
            while(pre[cur]&&!vis[cur]){
                vis[cur] = i;
                cur = pre[cur];
            }
            if(cur!=root&&vis[cur]==i){
                cnt++;
                while(!id[cur]){
                    id[cur] = cnt;
                    cur = pre[cur];
                }
            }
        }
        if(!cnt) break;
        for(int i = 1; i <= n; i++) if(!id[i]) id[i] = ++cnt;
        for(int i = 1; i <= m; i++){
            double cst = mc[e[i].v];
            e[i].u = id[e[i].u]; e[i].v = id[e[i].v];
            if(e[i].u==e[i].v) continue;
            e[i].d -= cst;
        }
        n = cnt; root = id[root];
    }
    return res;
}
int main(){
    while(scanf("%d %d",&n,&m)!=EOF){
        for(int i = 1; i <= n; i++) scanf("%lf %lf",&coor[i].first,&coor[i].second);
        for(int i = 1; i <= m; i++){
            scanf("%d %d",&e[i].u,&e[i].v);
            e[i].d = cal(coor[e[i].u],coor[e[i].v]);
        }
        double res = zhuliu();
        if(res!=-1) printf("%.2f\n",res);
        else puts("poor snoopy");
    }
    return 0;
}
```
