差分约束
```cpp
#include<cstdio>
#include<cstring>
#include<queue>
#include<iostream>
#include<vector>
using namespace std;
const int MAXN = 1e4+7;
const int INF = 0x3f3f3f3f;
int n,dist[MAXN];
bool vis[MAXN];
struct Graph{
    int tot,head[MAXN],to[MAXN<<2],nxt[MAXN<<2],cst[MAXN<<2];
    void init(){ tot = 0; memset(head,255,sizeof(head)); }
    void ADDEDGE(int u, int v, int c){
        tot++;
        to[tot] = v;
        cst[tot] = c;
        nxt[tot] = head[u];
        head[u] = tot;
    }
}G;
void SPFA(){
    memset(vis,0,sizeof(vis));
    memset(dist,-INF,sizeof(dist));
    dist[0] = 0;
    queue<int> que;
    que.push(0);
    while(!que.empty()){
        int u = que.front();
        que.pop();
        vis[u] = false;
        for(int i = G.head[u]; ~i; i = G.nxt[i]){
            int v = G.to[i];
            int c = G.cst[i];
            if(dist[v]<dist[u]+c){
                dist[v] = dist[u] + c;
                if(!vis[v]){
                    vis[v] = true;
                    que.push(v);
                }
            }
        }
    }
}
int main(){
    scanf("%d",&n);
    G.init();
    int maxr = 0;
    for(int i = 1; i <= n; i++){
        int l, r;
        scanf("%d %d",&l,&r);
        G.ADDEDGE(l,r+1,2);
        maxr = max(maxr,r+1);
    }
    for(int i = 1; i <= maxr; i++){
        G.ADDEDGE(i-1,i,0);
        G.ADDEDGE(i,i-1,-1);
    }
    SPFA();
    printf("%d\n",dist[maxr]);
    return 0;
}
```
